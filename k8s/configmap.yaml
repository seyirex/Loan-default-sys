apiVersion: v1
kind: ConfigMap
metadata:
  name: loan-api-config
  namespace: loan-default-prediction
  labels:
    app: loan-api
data:
  # Application Settings
  APP_NAME: "loan-default-prediction"
  APP_VERSION: "1.0.0"
  ENVIRONMENT: "production"

  # API Configuration
  API_HOST: "0.0.0.0"
  API_PORT: "8000"
  API_WORKERS: "4"

  # MLflow Configuration
  # Option 1: Use MLflow server (recommended for production)
  MLFLOW_TRACKING_URI: "http://mlflow-service:5000"
  # Option 2: Use file-based tracking (simpler, but no UI)
  # MLFLOW_TRACKING_URI: "file:///app/mlflow"
  MLFLOW_EXPERIMENT_NAME: "loan-default-prediction"
  MODEL_NAME: "loan_default_model"
  MODEL_STAGE: "Production"

  # Redis Configuration
  REDIS_HOST: "redis-service"
  REDIS_PORT: "6379"
  REDIS_DB: "0"
  CELERY_BROKER_URL: "redis://redis-service:6379/0"
  CELERY_RESULT_BACKEND: "redis://redis-service:6379/0"

  # Logging
  LOG_LEVEL: "INFO"

  # Rate Limiting
  RATE_LIMIT_PER_MINUTE: "100"

  # Drift Detection
  DRIFT_REFERENCE_SIZE: "1000"
  DRIFT_WINDOW_SIZE: "100"
  DRIFT_PSI_THRESHOLD: "0.15"

  # Model Thresholds
  PRODUCTION_MIN_ACCURACY: "0.88"
  PRODUCTION_MIN_RECALL: "0.75"
  PRODUCTION_MIN_F1: "0.30"
  PRODUCTION_MIN_ROC_AUC: "0.85"
  PRODUCTION_MIN_PR_AUC: "0.35"
